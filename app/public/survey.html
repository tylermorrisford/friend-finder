<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" href="../../images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="../../images/favicon.ico" type="image/x-icon">
    <title>Friend-Finder Survey</title>
    <!-- Bootstrap core CSS -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body class="text-center">
    <div class="container">
        <div class="jumbotron">
            <h1 class="display-4">Take the survey</h1>
            <p class="lead">You don't know any of these folks (or maybe you do?) so trust your gut, and make snap decisions about circle of friends that is completely fictitious, and get matched with a new friend!</p>
            <hr class="my-4">
            <a class="btn btn-primary btn-lg" href="/" role="button">Home page</a>
        </div>
        <form enctype="application/x-www-form-urlencoded" id="friendForm">
            <!-- <form id="friendForm"> -->
            <div class="form-row">
                <div class="col">
                    <input type="text" class="form-control" id="inputName" name="inputName"
                        placeholder="Enter your name (required)">
                </div>
                <div class="col">
                    <input type="text" class="form-control" id="inputLink" name="inputLink"
                        placeholder="Provide a link to your profile image (required)">
                </div>
            </div>
            <hr style="width: 40%">
            <div class="form-group col-sm12">
                <label for="exampleFormControlSelect1"><b>Statement 1: </b>I like Tim, but honestly, that guy is *loud*.</label>
                <select class="form-control" id="q1" name="q1">
                    <option selected value="null">Make a selection...</option>
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
                <br>
                <label for="exampleFormControlSelect1"><b>Statement 2: </b>If I'm being honest with myself, I kinda hate Steve.</label>
                <select class="form-control" id="q2" name="q2">
                    <option selected value="null">Make a selection...</option>
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
                <br>
                <label for="exampleFormControlSelect1"><b>Statement 3: </b>Claire is fun but sometimes I feel like I'm her unpaid
                    therapist.</label>
                <select class="form-control" id="q3" name="q3">
                    <option selected value="null">Make a selection...</option>
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
                <br>
                <label for="exampleFormControlSelect1"><b>Statement 4: </b>Sarah and Ryan's kid is kinda ugly tbh.</label>
                <select class="form-control" id="q4" name="q4">
                    <option selected value="null">Make a selection...</option>
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
                <br>
                <label for="exampleFormControlSelect1"><b>Statement 5: </b>I'm taking this survey and hoping that I really do get a new
                    friend.</label>
                <select class="form-control" id="q5" name="q5">
                    <option selected value="null">Make a selection...</option>
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
                <br>
                <label for="exampleFormControlSelect1"><b>Statement 6: </b>I'm afraid Larry and Tim are one argument away from breaking up.</label>
                <select class="form-control" id="q6" name="q6">
                    <option selected value="null">Make a selection...</option>
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
                <br>
                <label for="exampleFormControlSelect1"><b>Statement 7: </b>Tina's advice is usally bad.</label>
                <select class="form-control" id="q7" name="q7">
                    <option selected value="null">Make a selection...</option>
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
                <br>
                <label for="exampleFormControlSelect1"><b>Statement 8: </b>Brad acts tough but that dude is a goddamn softy.</label>
                <select class="form-control" id="q8" name="q8">
                    <option selected value="null">Make a selection...</option>
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
                <br>
                <label for="exampleFormControlSelect1">S<b>Statement 9: </b>Most people think Darren sucks, but I think he's funny.</label>
                <select class="form-control" id="q9" name="q9">
                    <option selected value="null">Make a selection...</option>
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
                <br>
                <label for="exampleFormControlSelect1"><b>Statement 10: </b>Steely Dan is a terrific musical group.</label>
                <select class="form-control" id="q10" name="q10">
                    <option selected value="null">Make a selection...</option>
                    <option value="1">1 (strongly disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (strongly agree)</option>
                </select>
            </div>
            <button type="submit" id="submit" class="btn btn-primary">Submit</button>
        </form>
        <div style="height: 100px"></div>
    </div>
    <!-- modal for friend match -->
    <div class="modal" id="friendModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">You've matched with:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <h6 id="friendMatch"></h6>
                    <img id="imageMatch" src="#">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">OK!</button>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">


        $('#submit').on('click', function (event) {
            event.preventDefault();
            if ($('#inputName').val() === "" || $('#inputLink').val() === "" || $('#q1').val() === "null" || $('#q2').val() === "null" || $('#q3').val() === "null" || $('#q4').val() === "null" || $('#q5').val() === "null" || $('#q6').val() === "null" || $('#q7').val() === "null" || $('#q8').val() === "null" || $('#q9').val() === "null" || $('#q10').val() === "null" ) {
                alert('Please complete the survey!');
            } else {

            var newFriend = {
                name: $('#inputName').val().trim(),
                link: $('#inputLink').val().trim(),
                scores: [
                    $('#q1').val(),
                    $('#q2').val(),
                    $('#q3').val(),
                    $('#q4').val(),
                    $('#q5').val(),
                    $('#q6').val(),
                    $('#q7').val(),
                    $('#q8').val(),
                    $('#q9').val(),
                    $('#q10').val(),
                ]
            };


            $.post("/api/friends", newFriend, function (data) {
                // place data in the modal
                console.log('post worked');
                $('#friendMatch').text(data.name)
                $('#imageMatch').attr('src', data.link)
                $('#friendModal').modal('toggle');
                $('#inputName').val("");
                $('#inputLink').val("");
                $('#q1').val("null"),
                $('#q2').val("null"),
                $('#q3').val("null"),
                $('#q4').val("null"),
                $('#q5').val("null"),
                $('#q6').val("null"),
                $('#q7').val("null"),
                $('#q8').val("null"),
                $('#q9').val("null"),
                $('#q10').val("null")
            })

        }
    });

    

    </script>
</body>

</html>